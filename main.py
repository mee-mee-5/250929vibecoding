# streamlit_app.py
import streamlit as st

st.set_page_config(page_title="MBTI 직업 추천", page_icon="🎯", layout="centered")

# ---------- 데이터 ----------
MBTI_LIST = [
    "ISTJ","ISFJ","INFJ","INTJ",
    "ISTP","ISFP","INFP","INTP",
    "ESTP","ESFP","ENFP","ENTP",
    "ESTJ","ESFJ","ENFJ","ENTJ"
]

# 이모지 사전 (직업 카테고리 감성용)
EMOJI = {
    "분석·연구": "🧠",
    "기술·엔지니어": "🛠️",
    "공공·안전": "🚓",
    "교육·상담": "🎓",
    "의료·돌봄": "🩺",
    "예술·디자인": "🎨",
    "비즈니스·기획": "📈",
    "미디어·콘텐츠": "🎬",
    "서비스·관광": "🛎️",
    "스포츠·액티비티": "⚽",
}

# MBTI별 추천 (중학생 눈높이 설명)
RECS = {
    "ISTJ": [
        {"job":"공무원", "cat":"공공·안전", "why":"규칙과 책임을 지키며 차분하게 일하는 강점이 어울려요."},
        {"job":"회계사", "cat":"비즈니스·기획", "why":"정확한 계산과 꼼꼼함이 필요한 분야에 강점이 있어요."},
        {"job":"품질관리 엔지니어", "cat":"기술·엔지니어", "why":"제품을 기준에 맞게 체크하는 꾸준함이 돋보여요."},
    ],
    "ISFJ": [
        {"job":"간호사", "cat":"의료·돌봄", "why":"세심하고 배려심이 커서 사람을 돌보는 일에 강해요."},
        {"job":"사회복지사", "cat":"공공·안전", "why":"도움이 필요한 이웃을 꾸준히 지원하는 데 어울려요."},
        {"job":"초등교사", "cat":"교육·상담", "why":"학생 한 명 한 명에 따뜻하게 관심을 기울일 수 있어요."},
    ],
    "INFJ": [
        {"job":"상담사", "cat":"교육·상담", "why":"타인의 감정을 깊이 이해하고 의미를 찾는 데 능해요."},
        {"job":"사회연구원", "cat":"분석·연구", "why":"사회의 변화를 탐구하고 더 나은 방향을 고민해요."},
        {"job":"콘텐츠 기획자", "cat":"미디어·콘텐츠", "why":"메시지와 가치를 담은 스토리를 설계하는 데 강점!"}
    ],
    "INTJ": [
        {"job":"데이터 과학자", "cat":"분석·연구", "why":"논리적으로 문제를 정의하고 해결책을 설계해요."},
        {"job":"연구원", "cat":"분석·연구", "why":"깊이 파고들어 새로움을 만들어내는 게 잘 맞아요."},
        {"job":"전략기획자", "cat":"비즈니스·기획", "why":"장기 계획을 세우고 체계적으로 실행해요."},
    ],
    "ISTP": [
        {"job":"기계 엔지니어", "cat":"기술·엔지니어", "why":"물건을 분해·조립하며 원리를 이해하는 데 강해요."},
        {"job":"자동차 정비", "cat":"기술·엔지니어", "why":"손으로 문제를 해결하는 실전 감각이 좋아요."},
        {"job":"응급구조사", "cat":"공공·안전", "why":"침착하게 위기 상황을 판단하고 행동할 수 있어요."},
    ],
    "ISFP": [
        {"job":"그래픽 디자이너", "cat":"예술·디자인", "why":"감각적이고 따뜻한 감성이 시각 작업과 잘 맞아요."},
        {"job":"사진작가", "cat":"예술·디자인", "why":"순간의 분위기와 아름다움을 포착하는 재능!"},
        {"job":"수의 보조사", "cat":"의료·돌봄", "why":"동물에게 친절하고 섬세하게 돌봄을 실천해요."},
    ],
    "INFP": [
        {"job":"작가", "cat":"미디어·콘텐츠", "why":"감정을 섬세한 글로 표현하고 공감받을 수 있어요."},
        {"job":"임상심리사", "cat":"교육·상담", "why":"타인의 마음을 이해하고 치유를 돕는 데 어울려요."},
        {"job":"비영리 활동가", "cat":"공공·안전", "why":"가치와 신념을 사회에 따뜻하게 실천해요."},
    ],
    "INTP": [
        {"job":"소프트웨어 개발자", "cat":"기술·엔지니어", "why":"논리적 문제 해결과 시스템 설계에 몰입해요."},
        {"job":"시스템 설계자", "cat":"기술·엔지니어", "why":"복잡한 구조를 원리로 깔끔하게 정리합니다."},
        {"job":"연구원", "cat":"분석·연구", "why":"호기심으로 새로운 가설을 만들고 검증해요."},
    ],
    "ESTP": [
        {"job":"세일즈 매니저", "cat":"비즈니스·기획", "why":"현장 감각과 실행력이 뛰어나며 설득에 강해요."},
        {"job":"스포츠 코치", "cat":"스포츠·액티비티", "why":"활동적이고 목표 지향적인 에너지가 잘 맞아요."},
        {"job":"소방관", "cat":"공공·안전", "why":"결단력과 대담함으로 현장에서 문제를 해결해요."},
    ],
    "ESFP": [
        {"job":"공연 예술가", "cat":"예술·디자인", "why":"무대에서 사람들에게 즐거움을 전하는 재능!"},
        {"job":"여행 기획자", "cat":"서비스·관광", "why":"사람들이 좋아할 경험을 생동감 있게 설계해요."},
        {"job":"방송작가", "cat":"미디어·콘텐츠", "why":"재치와 공감으로 재미있는 콘텐츠를 만들어요."},
    ],
    "ENFP": [
        {"job":"마케팅 기획자", "cat":"비즈니스·기획", "why":"아이디어로 사람들의 마음을 움직이는 데 강점!"},
        {"job":"창업가", "cat":"비즈니스·기획", "why":"새로운 가능성을 발견하고 도전하는 걸 즐겨요."},
        {"job":"교육 콘텐츠 개발자", "cat":"미디어·콘텐츠", "why":"재미있고 의미 있는 배움의 경험을 설계해요."},
    ],
    "ENTP": [
        {"job":"제품 매니저(PM)", "cat":"비즈니스·기획", "why":"문제 정의와 해결을 조율하는 브레인 역할!"},
        {"job":"스타트업 창업가", "cat":"비즈니스·기획", "why":"새로운 시도를 빠르게 실험하고 배우는 데 강해요."},
        {"job":"광고 기획자", "cat":"미디어·콘텐츠", "why":"기발한 아이디어로 이목을 끌고 설득해요."},
    ],
    "ESTJ": [
        {"job":"프로젝트 매니저", "cat":"비즈니스·기획", "why":"사람과 자원을 조직적으로 이끄는 데 탁월해요."},
        {"job":"경찰관", "cat":"공공·안전", "why":"원칙과 책임감으로 질서를 지키는 데 어울려요."},
        {"job":"운영 관리자", "cat":"비즈니스·기획", "why":"현장을 효율적으로 관리하고 개선해요."},
    ],
    "ESFJ": [
        {"job":"인사담당자(HR)", "cat":"비즈니스·기획", "why":"사람에 대한 관심과 소통 능력이 강점이에요."},
        {"job":"호텔 매니저", "cat":"서비스·관광", "why":"친절과 조직력이 조화를 이루는 서비스 리더!"},
        {"job":"교무·행정", "cat":"교육·상담", "why":"학교 운영을 체계적으로 돕고 연결해요."},
    ],
    "ENFJ": [
        {"job":"HRD 트레이너", "cat":"교육·상담", "why":"사람의 성장을 돕고 팀을 이끄는 리더십!"},
        {"job":"학교 상담사", "cat":"교육·상담", "why":"학생의 고민을 듣고 함께 해답을 찾아요."},
        {"job":"사회공익 캠페이너", "cat":"공공·안전", "why":"선한 영향력을 널리 퍼뜨리는 데 어울려요."},
    ],
    "ENTJ": [
        {"job":"경영 컨설턴트", "cat":"비즈니스·기획", "why":"큰 그림을 보고 실행 전략을 설계해요."},
        {"job":"기획·사업개발", "cat":"비즈니스·기획", "why":"새로운 사업을 구조화하고 추진하는 데 강점!"},
        {"job":"법조인(변호사 등)", "cat":"공공·안전", "why":"논리와 결단으로 복잡한 문제를 해결해요."},
    ],
}

# ---------- UI ----------
st.title("🎯 MBTI에 맞춘 직업 3가지 추천")
st.caption("중학생을 위한 가볍고 재미있는 진로 탐색 도구입니다. (참고용)")

with st.container():
    st.subheader("1) MBTI를 선택하세요")
    mbti = st.selectbox("내 MBTI", MBTI_LIST, index=MBTI_LIST.index("ENFP") if "ENFP" in MBTI_LIST else 0)

    st.divider()
    st.subheader("2) 추천 직업 보기")

    if mbti:
        items = RECS.get(mbti, [])
        if not items:
            st.info("해당 MBTI 데이터가 아직 없어요. 다른 유형을 선택해 보세요!")
        else:
            cols = st.columns(3)
            for i, rec in enumerate(items[:3]):
                with cols[i]:
                    cat = rec["cat"]
                    emoji = EMOJI.get(cat, "💡")
                    st.markdown(f"### {emoji} {rec['job']}")
                    st.write(f"**왜 어울리나요?** {rec['why']}")

    st.divider()
    with st.expander("🔎 TIP: 어떻게 탐색해 볼까요?"):
        st.markdown(
            "- 학교 진로 수업·동아리에서 관련 활동을 체험해 보세요.\n"
            "- 관심 직업의 **하루 일과**와 **필요 역량**을 찾아보고, 나에게 맞는지를 비교해 보세요.\n"
            "- MBTI는 절대적인 답이 아니라 **출발점**이에요. 여러 유형의 직업도 자유롭게 탐색하세요! 🌈"
        )

st.caption("※ MBTI는 성격 경향을 가볍게 참고하는 지표예요. 진로는 경험·흥미·가치관 등 다양한 요소를 함께 고려해 선택해요. ✨")
